<%-include('../layouts/header')%>
<%- include('../partials/admin-header')%>
<div class="header" style="margin-top: 80px;">
    <h1>Edit Product </h1>
</div>
<%- include('../partials/admin-canvas')%>
<div class="container-fluid">
    <div class="row  border-start">
        <main class="px-md-4 icons " style="margin-left: 18%;width: 80%; margin-top: 6%;">
            <div class="row d-flex justify-content-between">
                <div class="col-md-8">
                    <h1 class="mt-5">EDIT PRODUCT</h1>
                    <br>
                    <form action="/admin/editproduct/<%=product._id%>" method="post" enctype="multipart/form-data" class="bg-white" id="myForm">
                        <div class="form-group">
                            <label for="productName">Product Name:</label>
                            <input
                                type="text"
                                value="<%=product.name%>"
                                name="ProductName"
                                class="form-control bg-light"
                                id="productName"
                                placeholder="Enter product name"
                                
                            />
                        </div><br>

                        <div class="form-group">
                            <label for="productDescription">Product Description:</label>
                            <input
                                type="text"
                                value="<%=product.description%>"
                                class="form-control bg-light"
                                name="Description"
                                id="productDescription"
                                rows="4"
                                placeholder="Enter product description"
                                required
                            >
                        </div>
                        <br >
                        <div class="form-group">
                            <label for="productSpecification">Product Specification:</label>
                            <input
                                type="text"
                                value="<%=product.specifications%>"
                                class="form-control bg-light"
                                name="Specification1"
                                id="productSpecification1"
                                placeholder="Enter product Specification"
                                required
                            ><br>
                            <label for="productSpecification2">Product Specification:</label>
                            <input
                                type="text"
                                value="<%=product.specifications%>"
                                class="form-control bg-light"
                                name="Specification2"
                                id="productSpecification"
                                placeholder="Enter product Specification"
                                required
                            ><br>
                            <label for="productSpecification3">Product Specification:</label>
                            <input
                                type="text"
                                value="<%=product.specifications%>"
                                class="form-control bg-light"
                                name="Specification3"
                                id="productSpecification"
                                placeholder="Enter product Specification"
                                required
                            ><br>
                            <label for="productSpecification4">Product Specification:</label>
                            <input
                                type="text"
                                value="<%=product.specifications%>"
                                class="form-control bg-light"
                                name="Specification4"
                                id="productSpecification"
                                placeholder="Enter product Specification"
                                required
                            >
                        </div>
                        <br>

                        <div class="border p-3 mb-3 bg-light "> <!-- Added bg-light and text-center classes -->
                            <h3>Media</h3>
                            <div class="form-group text-center">
                                <label for="productImage">Drag and drop or click to upload an image:</label>
                                <br><br><br><br>
                                <input
                                type="file"
                                name="image"
                                class="form-control-file"
                                id="productImage"
                                accept="image/*"
                                multiple
                                style="display: none;"
                                
                            />
                            </div>
                            <!-- uploaded images -->
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="uploaded-image">
                                        <img src="/uploads/<%=product.images[0]%>" alt="Uploaded Image 1" id="uploadedImage1" class="img-fluid" data-index="1">
                                        <button onclick="return confirm('Are you sure you want to delete the image')" class="btn btn-danger btn-sm delete-image"  data-index="1">Delete</button>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="uploaded-image">
                                        <img src="/uploads/<%=product.images[1]%>" alt="Uploaded Image 2" id="uploadedImage2" class="img-fluid" data-index="2">
                                        <button onclick="return confirm('Are you sure you want to delete the image')" class="btn btn-danger btn-sm delete-image"  data-index="2">Delete</button>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="uploaded-image">
                                        <img src="/uploads/<%=product.images[2]%>" alt="Uploaded Image 3" id="uploadedImage3" class="img-fluid" data-index="3">
                                        <button onclick="return confirm('Are you sure you want to delete the image')" class="btn btn-danger btn-sm delete-image"  data-index="3">Delete</button>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="border p-3 mb-3">
                            <h2>Pricing</h2>
                            <div class="form-group">
                                <label for="basePrice">Base Price:</label>
                                <input
                                    value="<%=product.price%>"
                                    type="number"
                                    name="Price"
                                    class="form-control bg-light"
                                    id="basePrice"
                                    placeholder="Enter base price"
                                    required
                                />
                            </div>
                            <br>
                            <div class="form-group">
                                <label for="discountAmount">Discount Amount:</label>
                                <input
                                    value="<%=product.discountPrice%>"
                                    type="number"
                                    name="DiscountAmount"
                                    class="form-control bg-light"
                                    id="discountAmount"
                                    placeholder="Enter discount amount"
                                    required
                                />
                            </div>
                        </div>


                        <div class="border p-3 mb-3">
                            <h2>Variations</h2>
                            <div>
                                <input type="radio" name="productType" id="storageRadio" value="Storage Devices"> Storage Devices
                                <input type="radio" name="productType" id="graphicscardRadio" value="Graphics Card"> Graphics Card
                            </div>
                            <div id="watchColorInput" style="display: none;">
                                <label for="storagesize">Enter Storage size:</label>
                                <input type="text" name="storagesize" id="storagesize">
                            </div>
                            <div id="perfumeQuantityDropdown" style="display: none;">
                                <label for="gpumodel">Enter the GPU model</label>
                                <select id="gpumodel" name="graphicscard">
                                      <option value="Ge30">GeForce RTX 30 Series</option>
                                    <option value="Ge16">GeForce GTX 16 Series</option>
                                    <option value="Ge10">GeForce GTX 10 Series</option>
                                    <!-- Add more options as needed -->
                                </select>
                            </div>
                        </div>



                        <div class="border p-3 mb-3">
                            <h2>Stock</h2>
                            
                            <div class="form-group">
                                <label for="quantity">Quantity:</label>
                                <input
                                    type="number"
                                    value="<%=product.stock%>"
                                    name="AvailableQuantity"
                                    class="form-control bg-light"
                                    id="quantity"
                                    placeholder="Enter quantity"
                                    required
                                />
                            </div>
                        </div>
                </div>

                <div class="col-md-4 my-5">
                    <div class="bg-white p-3">
                        <div class="form-group">
                            <label for="category">Category:</label>
                            <select class="form-control bg-light" id="category" name="Category" required>
                                <option value="GRAPHICS CARD" <%= product.category === "GRAPHICS CARD" ? 'selected' : '' %>>GRAPHICS CARD</option>
                                <option value="PROCESSORS" <%= product.category === "PROCESSORS" ? 'selected' : '' %>>PROCESSORS</option>
                                <option value="CPU COOLERS" <%= product.category === "CPU COOLERS" ? 'selected' : '' %>>CPU COOLERS</option>
                                <option value="STORAGE DEVICES" <%= product.category === "STORAGE DEVICES" ? 'selected' : '' %>>SSD</option>
                               
                            </select>
                        </div><br>
                        <div class="form-group">
                            <br>
                            <label for="brandName">Brand Name:</label>
                            <select name="BrandName" class="form-select bg-light" id="brand" required>
                                <option value="NVIDIA" <%= product.brandName === "NVIDIA" ? 'selected' : '' %>>NVIDIA</option>
                                <option value="AMD" <%= product.brandName === "AMD" ? 'selected' : '' %>>AMD</option>
                                <option value="INTEL" <%= product.brandName === "INTEL" ? 'selected' : '' %>>INTEL</option>
                                <option value="ADATA"<%= product.brandName === "ADATA" ? 'selected' : '' %>>ADATA</option>
                            </select>
                        </div><br>
                        <div class="form-group">
                            <label for="tags">Tags:</label>
                            <input
                                type="text"
                                value="<%=product.tags%>"
                                class="form-control bg-light"
                                name="Tags"
                                id="tags"
                                placeholder="Enter tags"
                                required
                            />
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary ms-3">Edit Product</button>
                </div>
                </form>
            </div>
        </main>
    </div>
</div>
<script>

const basePriceInput = document.getElementById("basePrice");
                const discountPriceInput = document.getElementById("discountAmount");
                const basePriceValidationMessage = document.getElementById("basePrice-validation-message");
                const discountPriceValidationMessage = document.getElementById("discountPrice-validation-message");
               
                const form = document.getElementById('myForm');
                basePriceInput.addEventListener("input", () => {
                    validatePriceInput(basePriceInput, basePriceValidationMessage);
                });

                discountPriceInput.addEventListener("input", () => {
                    validatePriceInput(discountPriceInput, discountPriceValidationMessage);
                });

                function validatePriceInput(inputField, validationMessage) {
                    const priceValue = parseFloat(inputField.value);

                    if (isNaN(priceValue) || priceValue < 0) {
                        validationMessage.textContent = "Amount should be a positive value";
                    } else {
                        validationMessage.textContent = ""; // Clear the validation message
                    }
                }

      


                form.addEventListener('submit', function (event) {
      // Get all input elements with the "form-control bg-light" class
      const inputs = document.querySelectorAll('.form-control.bg-light');

      // Check each input value for only blank spaces
      for (const input of inputs) {
        if (input.value.trim() === '') {
          // If an input contains only blank spaces, prevent form submission
          event.preventDefault();
          alert('Input fields cannot be empty or contain only blank spaces.');
          return; // Stop further checking once a blank space is found
        }
      }

    //      // Check if the discount amount is greater than or equal to the base price
    //      if (parseFloat(discountPriceInput.value) >= parseFloat(basePriceInput.value)) {
    //     // If the discount amount is not less than the base price, prevent form submission
    //     event.preventDefault();
    //     alert('Discount amount must be less than the base price.');
    //     return;
    //   }
    });


</script>
<%- include('../layouts/footer') %>